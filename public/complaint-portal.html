<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Complaint Portal • COVID Accountability Now</title>
  <link rel="stylesheet" href="/assets/site.css?v=1" />
  <!-- Turnstile API (allowed by CSP-RO) -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>
  <header>
    <!-- existing header/nav -->
  </header>

  <main id="main" tabindex="-1">
    <h1>Complaint Portal</h1>

    <p class="sr-only" id="sr-status" aria-live="polite"></p>

    <div class="control">
      <label for="stateSelect">Select your state</label>
      <select id="stateSelect" aria-describedby="stateHelp">
        <option value="">Loading…</option>
      </select>
      <div id="stateHelp" class="small">We’ll show available boards and their official sites.</div>
    </div>

    <div id="boards" class="boards" role="group" aria-label="Boards"></div>

    <!-- Turnstile placeholder; JS will render using the site key from /api/site-config -->
    <div class="cf-turnstile" data-theme="light" aria-label="Verification widget"></div>

    <div class="actions">
      <button id="openBtn" class="btn" disabled>Open Board Page</button>
    </div>

    <!-- Optional helpers: render if your template includes them -->
    <div class="helper">
      <textarea id="reportText" placeholder="(optional) draft your complaint text here…"></textarea>
      <div class="helper-actions">
        <button id="copyText" class="btn-link">Copy</button>
        <button id="saveJson" class="btn-link">Save JSON</button>
        <button id="reportBtn" class="btn-link" type="button">Guidance</button>
      </div>
    </div>
  </main>

  <footer>
    <!-- existing footer -->
  </footer>

  <script>
    // Provide commit SHA to app.js for cache-bust; CF Pages exposes it as an env at build time.
    window.__COMMIT_SHA__ = (typeof CF_PAGES_COMMIT_SHA !== 'undefined' ? CF_PAGES_COMMIT_SHA : '');
  </script>
  <script src="/assets/app.js"></script>
</body>
</html>

